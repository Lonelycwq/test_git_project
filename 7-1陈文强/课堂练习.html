<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    ul {
      list-style: none;
    }

    .box {
      width: 1000px;
      margin: 50px auto;
    }

    .box table {
      width: 100%;
      border: 1px solid #ccc;
      border-collapse: collapse;
    }

    .box table thead {
      background: #ccc;
    }

    .box table th,
    .box table td {
      padding: 10px;
      text-align: center;
      border-collapse: collapse;
    }
  </style>
</head>

<body>
  <div class="box">
    <table border="1">
      <thead>
        <tr>
          <th><input type="checkbox" name="" id="cleckall">全选/全不选</th>
          <th>菜名</th>
          <th>商家</th>
          <th>价钱</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><input class="clecktd" type="checkbox" name="" id=""></td>
          <td>黄焖鸡米饭</td>
          <td>彭德楷黄焖鸡</td>
          <td>20</td>
        </tr>
        <tr>
          <td><input class="clecktd" type="checkbox" name="" id=""></td>
          <td>酸菜鱼</td>
          <td>太二酸菜鱼</td>
          <td>200</td>
        </tr>
        <tr>
          <td><input class="clecktd" type="checkbox" name="" id=""></td>
          <td>蒸饺</td>
          <td>沙县小吃</td>
          <td>5</td>
        </tr>
      </tbody>
    </table>
  </div>
  <input type="button" name="" class="btn1" value="注册事件">
</body>
<script>
  //1.声明变量存储获取的全选框和单个选框
  let cleckAll = document.getElementById('cleckall');
  let cleckTd = document.getElementsByClassName('clecktd');
  //2.全选框绑定点击事件
  cleckAll.onclick = function () {
    //3.声明变量存储全选框的checked值
    let cleckAll1 = cleckAll.checked;
    //4.循环遍历单个复选框
    for (let i = 0; i < cleckTd.length; i++) {
      //5.判断全选框为选中时，下面单个复选框全部选中，否则全部不选中
      if (cleckAll1 === true) {
        cleckTd[i].checked = true;
      } else {
        cleckTd[i].checked = false;
      }
    }
  }
  //6.循环给所有单个复选框绑定点击事件
  for (let i = 0; i < cleckTd.length; i++) {
    cleckTd[i].onclick = function () {
      //7.使用反证法，假设全选框是选中状态
      let flag = true;
      //8.循环单个复选框的次数来判断单个复选框是否选中
      for (let j = 0; j < cleckTd.length; j++) {
        //9.循环至有一个未选择的时候改变全选框的选中状态为不选中
        if (cleckTd[j].checked == false) {
          flag = false;
          break;
        }
        console.log(cleckTd[j]);
      }
      //10.改变全选框的状态
      cleckAll.checked = flag;
    }
  }


  //注册事件
  var btn1 = document.querySelector('.btn1');
  btn1.addEventListener('click', function () {
    btn1.value = '另一种注册事件';
  });
</script>

</html>